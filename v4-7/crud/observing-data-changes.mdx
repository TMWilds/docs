---
title: Observing Data Changes
---

A *store observer* is a DQL query that runs continuously and triggers a callback when a change to the store impacts the results of the query.

Store observers are useful when you want to monitor changes from your local Ditto store and react to them immediately. For instance, when your end user updates their profile, asynchronously display changes in realtime.

## Setting Up Store Observers

Using the `registerObserver` method, set up an observer within the `store` namespace enclosed with a query that specifies the collection to watch for changes, as well as your logic to handle the incoming changes.

### Store Observer with Query Arguments

To associate arguments with your query add them as a parameter.

<Tabs>
    <Tab title="Swift">
    ```swift
    let observer = ditto.store.registerObserver(
      query: "SELECT * FROM cars WHERE color = :color",
      argumets: [ "color": "blue" ]){ result in /* handle change */ };
    ```
    </Tab>
    <Tab title="Kotlin">
    ```kotlin
    ditto.store.registerObserver(
      "SELECT * FROM cars WHERE color = :color",
      mapOf("color" to "blue")) { result ->
      /* handle change */ };
    ```
    </Tab>
    <Tab title="JS">
    ```javascript
    const changeHandler = (result) => {
      // handle change
    }
    const observer = ditto.store.registerObserver(
      "SELECT * FROM cars WHERE color = :color",
      changeHandler,
      { color: 'blue' });
    ```
    </Tab>
    <Tab title="Java">
    ```java
    DittoStoreObserver observer = ditto.store.registerObserver(
        "SELECT * FROM cars WHERE color = :color",
        Collections.singletonMap("color", "blue"),
        result -> {
            // handle change
        }
    );
    ```
    </Tab>
    <Tab title="C#">
    ```csharp
    // Without Arguments
    var result = await ditto.Store.RegisterObserver(
      "SELECT * FROM cars",
      (result) => {
        // handle change
      });

    // With Arguments
    var result = ditto.Store.RegisterObserver(
      "SELECT * FROM cars WHERE color = :color",
      new Dictionary<string, object> { "color", "blue" },
      (result) => {
        // handle change
      });
    ```
    </Tab>
    <Tab title="C++">
    ```cpp
    auto observer = ditto.get_store().register_observer(
      "SELECT * FROM cars",
      {{"color", "blue"}}),
      [&](QueryResult result) { /* handle change */ });
    ```
    </Tab>
    <Tab title="Rust">
    ```rust
    struct Args {
        color: String,
    }

    //...

    let args = Args {
        color: "blue".to_string(),
    }

    let observer = ditto.store().register_observer(
      "SELECT * from cars WHERE color = :color",
      args,
      move |result: QueryResult| {
        // handle change
      })
    ```
    </Tab>
    <Tab title="Dart">
    ```dart
    final observer = ditto.store.registerObserver(
      "SELECT * FROM cars WHERE color = :color",
      arguments: { color: "blue" },
      onChange: (queryResult) {
        // handle change
      },
    );
    ```
    </Tab>
</Tabs>

## Canceling a Store Observer

To cancel a store observer, call `cancel` on the observer object.

Once canceled, the store observer will stop processing in the background and will no longer call the provided callback.

<Tabs>
    <Tab title="Swift">
    ```swift
    observer.cancel()
    ```
    </Tab>
    <Tab title="Kotlin">
    ```kotlin
    observer.cancel()
    ```
    </Tab>
    <Tab title="JS">
    ```javascript
    observer.cancel()
    ```
    </Tab>
    <Tab title="Java">
    ```java
    observer.cancel();
    ```
    </Tab>
    <Tab title="C#">
    ```csharp
    observer.Cancel()
    ```
    </Tab>
    <Tab title="C++">
    ```cpp
    observer.cancel();
    ```
    </Tab>
    <Tab title="Rust">
    ```rust
    observer.cancel()
    ```
    </Tab>
    <Tab title="Dart">
    ```dart
    await observer.cancel();
    ```
    </Tab>
</Tabs>

## Accessing Store Observers

To access store observers from the local Ditto store:

<Tabs>
    <Tab title="Swift">
    ```swift
    ditto.store.observers
    ```
    </Tab>
    <Tab title="Kotlin">
    ```kotlin
    ditto.store.observers
    ```
    </Tab>
    <Tab title="JS">
    ```javascript
    ditto.store.observers
    ```
    </Tab>
    <Tab title="Java">
    ```java
    ditto.store.observers;
    ```
    </Tab>
    <Tab title="C#">
    ```csharp
    ditto.Store.Observers
    ```
    </Tab>
    <Tab title="C++">
    ```cpp
    ditto.get_store().observers()
    ```
    </Tab>
    <Tab title="Rust">
    ```rust
    ditto.store().observers()
    ```
    </Tab>
    <Tab title="Dart">
    ```dart
    // Coming Soon
    ```
    </Tab>
</Tabs>

