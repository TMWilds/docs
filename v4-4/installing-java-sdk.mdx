---
title : "Installing Java SDK"
---

You can integrate the Ditto SDK into Kotlin projects to develop for the Android platform.&#x20;

<Info>
For a complete overview of the platforms, transports, and devices the Java SDK supports, see [Compatibility with Java](<./Compatibility with Java.md>).
</Info>

To install the Java SDK:

<Steps>
<Step>
Confirm that you meet the minimum requirements. ([Prerequisites]())
</Step>

<Step>
Prepare your environment for Ditto. ([Setting Up Your Environment]())
</Step>

<Step>
Set up your app permissions. ([Configuring Permissions]())
</Step>

<Step>
Add Ditto to your app. ([Integrating Ditto]())
</Step>
</Steps>

# Prerequisites

Following are the minimum requirements that must be met before attempting to install Ditto.

- Android version 6.0 (Marshmallow) or later
- `minSdk` version 23.0 or later
- `compileSdk` version 31.0 or later
- Java Development Kit (JDK) version 11.0 or later

# Setting Up Your Environment

# Configuring Permissions

## Android Manifest Permissions

The Ditto Android SDK includes a set of permissions that are required to use all
the device features necessary to enable sync. The permissions below will be
automatically merged into your app's final manifest.

<Tabs>
<Tab title="AndroidManifest.xml">
```xml
<manifest
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android">

<uses-permission android:name="android.permission.BLUETOOTH"
    android:maxSdkVersion="30" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN"
    android:maxSdkVersion="30" />
<uses-permission android:name="android.permission.BLUETOOTH_ADVERTISE"
    tools:targetApi="s" />
<uses-permission android:name="android.permission.BLUETOOTH_CONNECT"
    tools:targetApi="s" />
<uses-permission android:name="android.permission.BLUETOOTH_SCAN"
    android:usesPermissionFlags="neverForLocation"
    tools:targetApi="s" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"
    android:maxSdkVersion="32" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"
    android:maxSdkVersion="30" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.NEARBY_WIFI_DEVICES"
    android:usesPermissionFlags="neverForLocation"
    tools:targetApi="tiramisu" />

```
</Tab>
</Tabs>

The `tools:targetApi` attribute causes the permission to only be requested on
devices running the specified API level or higher. This avoids errors on older
OS versions that do not recognize the permission.

The `android:maxSdkVersion` attribute causes that permission to only be requested
on devices running the specified SDK level or lower. This avoids asking for more
permissions than Ditto needs, however it will prevent your app from being able
to request the permission on devices running a newer OS version. To opt out of
this behavior and request the permission on all OS versions, see the following
snippet:

<Tabs>
<Tab title="Location Permission Override">
```xml
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"
    tools:remove="android:maxSdkVersion" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"
    tools:remove="android:maxSdkVersion" />
```

</Tab>
</Tabs>

Note that you may need to add the `xmlns:tools="http://schemas.android.com/tools"`
namespace attribute to your app's root `<manifest>` tag as shown in the
`AndroidManifest.xml` example above.

This will configure your app's build to ignore the `android:maxSdkVersion`
attribute in our SDK allowing the permission to be requested on any SDK version.
This techniquie can be used to tweak any permissions to your liking.

For more details, see the documentation for the [Bluetooth ](https://developer.android.com/guide/topics/connectivity/bluetooth/permissions)and [WiFi Aware ](https://developer.android.com/guide/topics/connectivity/wifi-permissions)permissions in the Android Documentation.

## Runtime Permissions

```java
void checkLocationPermission() {
   DittoSyncPermissions permissions = new DittoSyncPermissions(this);
   String[] missing = permissions.missingPermissions(permissions.requiredPermissions());
   if (missing.length > 0) {
      this.requestPermissions(missing, 0);
   }
}
```

```java
@Override
public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
   super.onRequestPermissionsResult(requestCode, permissions, grantResults);
   this.ditto.refreshPermissions();
}
```

# Integrating Ditto

<Steps>
<Step>
Add Ditto to your application.

We recommend placing this in your Application.onCreate method. Note that the `Context` you want to reference here is the **Application level** `Context`, rather than whatever Activity you might happen to be instantiating the Ditto instance from initially. This is because you need to ensure that your app is keeping a single Ditto instance alive for the entire lifetime of the application so it's not going out of scope or getting garbage collected.

```java
DittoDependencies androidDependencies = new DefaultAndroidDittoDependencies(this.context);
DittoLogger.setMinimumLogLevel(DittoLogLevel.DEBUG);
DittoIdentity identity = new DittoIdentity.OnlinePlayground(androidDependencies, "REPLACE_ME_WITH_YOUR_APP_ID", "YOUR_PLAYGROUND_TOKEN_HERE");
Ditto ditto = new Ditto(androidDependencies, identity);

try {
    ditto.startSync();
} catch(DittoError e) {
    //handle error
}
```

</Step>

<Step>
Replace `YOUR_APP_ID` and `YOUR_PLAYGROUND_TOKEN` with your access credentials available in the portal.

<Info>
For instructions on how to obtain your access credentials, see [Onboarding](/v4-4/onboarding). For an introduction to authentication in Ditto, see *Ditto Basics* > [Authentication and Initialization](</v4-5/basics/authentication-and-initialization>).
</Info>
</Step>
</Steps>
