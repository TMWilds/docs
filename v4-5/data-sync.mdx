---
title : Data Sync
description : "Here's a detailed guide with step-by-step instructions on integrating sync functionality within your app, allowing seamless communication with remote peers."
---

## Sync Start and Stop

Required only once, initiating the sync process automatically connects you with the mesh network. Once connected, you immediately begin receiving updates from publishing remote peers and sending updates to subscribing remote peers.

## Starting Sync

To initiate the sync process:

<Tabs>
    <Tab title="Swift">
    ```swift
    try! ditto.startSync()
    ```
    </Tab>
    <Tab title="Kotlin">
    ```kotlin
    try {
        ditto.startSync()
    } catch (e: DittoError) {
        // handle error
    }
    ```
    </Tab>
    <Tab title="JS">
    ```javascript
    try {
      ditto.startSync()
    } catch (err) {
      // handle error
    }
    ```
    </Tab>
    <Tab title="Java">
    ```java
    try {
        ditto.startSync();
    } catch(DittoError e) {
        // handle error
    }
    ```
    </Tab>
    <Tab title="C#">
    ```csharp
    try
    {
        ditto.StartSync();
    }
    catch (DittoException ex)
    {
        // handle exception
    }
    ```
    </Tab>
    <Tab title="C++">
    ```cpp
    try {
      ditto.start_sync();
    } catch (const DittoError &err) {
      std::cerr << err.what();
    }
    ```
    </Tab>
    <Tab title="Rust">
    ```rust
    ditto.try_start_sync()?;
    ```
    </Tab>
</Tabs>

<Info>
Ensure the sync process remains active throughout your app's lifecycle by starting the sync process (`startSync`) in the top-most scope of your code.
</Info>

## Stopping Sync

To stop the sync process, call the `stopSync` function. Once called, you will be disconnect from any peers and all active sync subscriptions will be paused.

<Tabs>
    <Tab title="Swift">
    ```swift
    try! ditto.stopSync()
    ```
    </Tab>
    <Tab title="Kotlin">
    ```kotlin
    try {
        ditto.stopSync()
    } catch (e: DittoError) {
        // handle error
    }
    ```
    </Tab>
    <Tab title="JS">
    ```javascript
    try {
      ditto.stopSync()
    } catch (err) {
      // handle error
    }
    ```
    </Tab>
    <Tab title="Java">
    ```java
    try {
        ditto.stopSync();
    } catch(DittoError e) {
        // handle error
    }
    ```
    </Tab>
    <Tab title="C#">
    ```csharp
    try
    {
        ditto.StopSync();
    }
    catch (DittoException ex)
    {
        // handle exception
    }
    ```
    </Tab>
    <Tab title="C++">
    ```cpp
    try {
      ditto.stop_sync();
    } catch (const DittoError &err) {
      std::cerr << err.what();
    }
    ```
    </Tab>
    <Tab title="Rust">
    ```rust
    ditto.try_stop_sync()?;
    ```
    </Tab>
</Tabs>


## Subscriptions Management

<Warning>
DQL sync subscriptions are supported for devices on version 4.5 or later.

Devices on Ditto versions 4.4 or earlier are supported, however will _not_ sync data by way of DQL subscriptions. For information on syncing with devices on version 4.4 and earlier, see _Platform Manual_ \> Legacy API & Language > [Data Sync (Legacy)](#4mF4vp9MK0WZc2COLhflH).
</Warning>

Manage your sync subscriptions:

* To get your active subscriptions, call the subscriptions method on the ditto.sync namespace. ([Retrieving Subscriptions](/v4-5/data-sync#J8rYE))

* To cancel a subscription, call cancel on its subscription object you instantiated when setting up your subscription. ([Canceling Subscriptions](/v4-5/data-sync#aVT0-))

* To confirm cancelation, call the isCancelled field on the subscription object. ([Canceling Subscriptions](/v4-5/data-sync#aVT0-))

## Creating Subscriptions

To register a new sync subscription in your app. For example, the following snippet demonstrates how to establish a subscription to sync updates to documents in the `cars` collection with a field of `color` set to the value `blue`:

<Tabs>
    <Tab title="Swift">
    ```swift
    ditto.sync.registerSubscription("SELECT * FROM cars")
    ```
    </Tab>
    <Tab title="Kotlin">
    ```kotlin
    ditto.sync.registerSubscription("SELECT * FROM cars")
    ```
    </Tab>
    <Tab title="JS">
    ```javascript
    ditto.sync.registerSubscription("SELECT * FROM cars")
    ```
    </Tab>
    <Tab title="Java">
    ```java
    ditto.sync.registerSubscription("SELECT * FROM cars")
    ```
    </Tab>
    <Tab title="C#">
    ```csharp
    ditto.Sync.RegisterSubscription("SELECT * FROM cars");
    ```
    </Tab>
    <Tab title="C++">
    ```cpp
    auto subscription =
      ditto.sync().register_subscription("SELECT * FROM cars");
    ```
    </Tab>
    <Tab title="Rust">
    ```rust
    let subscription =
      ditto.sync().register_subscription("SELECT * FROM cars", None);
    ```
    </Tab>
</Tabs>

Sync subscriptions also support argument injection using the `:argument` syntax in DQL:

<Tabs>
    <Tab title="Swift">
    ```swift
    ditto.sync.registerSubscription("""
      SELECT *
      FROM cars
      WHERE color = :color
      """,
      [ "color": "blue" ])
    ```
    </Tab>
    <Tab title="Kotlin">
    ```kotlin
    ditto.sync.registerSubscription("""
      SELECT *
      FROM cars
      WHERE color = :color
      """,
      mapOf("color" to "blue"))
    ```
    </Tab>
    <Tab title="JS">
    ```javascript
    ditto.sync.registerSubscription(`
      SELECT *
      FROM cars
      WHERE color = :color`,
      { color: 'blue' })
    ```
    </Tab>
    <Tab title="Java">
    ```java
    ditto.sync.registerSubscription(
      "SELECT * FROM cars WHERE color = :color",
      Collections.singletonMap("color", "blue"))
    ```
    </Tab>
    <Tab title="C#">
    ```csharp
    var queryArguments = new Dictionary<string, object>(){{"color", "blue" }};

    ditto.Sync.RegisterSubscription(
      "SELECT * FROM cars WHERE color = 'blue'",
      queryArguments);
    ```
    </Tab>
    <Tab title="C++">
    ```cpp
    ditto.sync().register_subscription(
      "SELECT * FROM cars WHERE color = :color",
      {{"color", "blue"}});
    ```
    </Tab>
    <Tab title="Rust">
    ```rust
    struct Args {
      color: String,
    }

    // ...

    let args = Args {
      color: "blue".to_string(),
    };
    ditto.sync().register_subscription(
      "SELECT * FROM cars WHERE color = :color",
      args);
    ```
    </Tab>
</Tabs>

***

## Retrieving Subscriptions

Retrieve active sync subscriptions by calling the `subscriptions` method on the `ditto.sync` namespace:

<Tabs>
    <Tab title="Swift">
    ```swift
    let activeSubscriptions = ditto.sync.subscriptions;
    ```
    </Tab>
    <Tab title="Kotlin">
    ```kotlin
    val activeSubscriptions = ditto.sync.subscriptions
    ```
    </Tab>
    <Tab title="JS">
    ```javascript
    const activeSubscriptions = ditto.sync.subscriptions
    ```
    </Tab>
    <Tab title="Java">
    ```java
    DittoSyncSubscription[] activeSubscriptions = ditto.sync.subscriptions;
    ```
    </Tab>
    <Tab title="C#">
    ```csharp
    var activeSubscriptions = ditto.Sync.Subscriptions;
    ```
    </Tab>
    <Tab title="C++">
    ```cpp
    // Not Supported. Hold the reference to the SyncSubscription object.
    ```
    </Tab>
    <Tab title="Rust">
    ```rust
    // Not Supported. Hold the reference to the SyncSubscription object.
    ```
    </Tab>
</Tabs>

***

## Canceling Subscriptions

<Tabs>
    <Tab title="Swift">
    ```swift
    subscription.cancel()
    ```
    </Tab>
    <Tab title="Kotlin">
    ```kotlin
    subscription.close()
    ```
    </Tab>
    <Tab title="JS">
    ```javascript
    subscription.cancel()
    ```
    </Tab>
    <Tab title="Java">
    ```java
    subscription.close()
    ```
    </Tab>
    <Tab title="C#">
    ```csharp
    subscription.Cancel();
    ```
    </Tab>
    <Tab title="C++">
    ```cpp
    // ...
    ```
    </Tab>
    <Tab title="Rust">
    ```cpp
    // ...
    ```
    </Tab>
</Tabs>

Check if a sync subscription is canceled by using the `isCancelled` field on the subscription object:

<Tabs>
    <Tab title="Swift">
    ```swift
    subscription.isCancelled
    ```
    </Tab>
    <Tab title="Kotlin">
    ```kotlin
    subscription.isClosed
    ```
    </Tab>
    <Tab title="JS">
    ```javascript
    subscription.isCancelled
    ```
    </Tab>
    <Tab title="Java">
    ```java
    subscription.isCancelled
    ```
    </Tab>
    <Tab title="C#">
    ```csharp
    subscription.IsCancelled
    ```
    </Tab>
    <Tab title="C++">
    ```cpp
    // ...
    ```
    </Tab>
    <Tab title="Rust">
    ```cpp
    // ...
    ```
    </Tab>
</Tabs>


