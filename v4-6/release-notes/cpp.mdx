---
title: "C++"
icon: code
iconType: solid
---

<Frame>
  <img src="/images/v4.7/release-6.webp"/>
</Frame>


## 4.6 Version Release


  <Accordion title="Added: Support for runtime configuration using DQL">
    Ditto introduced an experimental feature for retrieving, configuring, and restoring default configurations for the Ditto peer-to-peer system at runtime using Ditto Query Language (DQL) syntax.

    <Info>
      The Customer Experience team offers this feature to customers when appropriate for your scenario and use case.
    </Info>

    Through two new statements: `ALTER SYSTEM` and `SHOW`, you can change parameters, settings, and configurations while your peer-to-peer system is actively running.
  </Accordion>

  <Accordion title="Fixed: Accumulation of unsubscribed documents">
    Due to recent improvements to the sync protocol, Small peers no longer accumulate unsubscribed documents when subscription statuses are changed.

    This fix ensures that the peer-to-peer system prevents retaining unnecessary data, resulting in optimized resource usage.
  </Accordion>

  <Accordion title="Changed: Sync protocol to streamline the sync process">
    Ditto's recent adjustments to the sync protocol have decreased the exchange of redundant data during re-synchronization, improving the efficiency and stability of the sync process.
  </Accordion>

  <Accordion title="Changed: Sync protocol so peers use the latest version">
    Ditto decoupled sync protocol from conflict-free replicated data types (CRDTs) so peers now prioritize using the latest supported protocol version for data exchange.

    Even if your app uses legacy CRDTs, you'll benefit from this backward-compatible change.
  </Accordion>

  <Accordion title="Improved: API reference for `sort()` method">
    The documentation for the `sort()` API method on cursor operations has been updated to provide clearer explanations of behavior in cases where the specified field for sorting is missing.
  </Accordion>

  <Accordion title="Improved: Parser error messages">
    Now, parser error messages focus more on indicating the location of errors within the input code, rather than suggesting potential fixes.

    With this improvement to the API reference, you have better guidance in debugging your code.
  </Accordion>

  <Accordion title="Fixed: An issue where Ditto Link could enter an infinite loop">
    This fix addresses a specific bug where Ditto Link could go into a "forever loop" under certain conditions. This loop, caused performance issues and could potentially lead your app crashing.
  </Accordion>

  <Accordion title="Fixed: Inconsistent handling of legacy query-builder APIs">
    Before this fix, there were issues with incorrect casting to `boolean` values, leading to inconsistent behavior. This update ensures that values are cast properly, resulting in consistency across your app.
  </Accordion>

  <Accordion title="Added: Comparison operations for legacy query-builder APIs">
    If you're using legacy CRDTs in your app, now you can perform comparisons with `ATTACHMENT` objects.
  </Accordion>

  <Accordion title="Fixed: Limitation in DQL query capability for attachment tokens">
    Previously, DQL queries were limited in their ability to retrieve the pointer that Ditto uses to fetch your `ATTACHMENT` object.

    Now you can query the following additional fields to improve query capabilities:

    | **Detail**    | **Description**                                                                                        |
    | ------------- | ------------------------------------------------------------------------------------------------------ |
    | Attachment ID | A cryptographic hash of the attachment's contents. (See Organizing by ID and Attachment Token)         |
    | Metadata      | Additional information about the attachment, such as its name, type, and so on. (See Attachment Token) |
    | Blob Length   | The size of the blob data in terms of length (`len`) in bytes. (See Blob Store)                        |

    Example document showing the fields added:

    ```json
    {
        "_id": "abc123",
        "make": "Hyundai",
        "year": 2018,
        "color": "black",
        "picture": {
            "id": "<unique identifier>",
            "metadata": {
                "mime_type": "image/jpeg",
                "name": "car_stock_photo.jpg",
            },
            "len": 123
        }
    }
    ```
  </Accordion>

  <Accordion title="Fixed: Error handling when creating an `ATTACHMENT`">
    We've improved error handling mechanisms to manage input-output (IO) errors that may result during the creation of `ATTACHMENT` objects.

    Now you'll receive clearer feedback when encountering errors so you can prevent potential crashes and improve the overall stability of your app.
  </Accordion>

  <Accordion title="Fixed: Internal data-decoding functions">
    Improved internal data decoding functions to prevent API crashes under certain inputs:

    We've enhanced the software component for handling tasks like byte parsing, character decoding, and data type conversion. Instead of crashing, the API now returns an error.
  </Accordion>

  <Accordion title="Fixed: Issues causing crashes when preparing to sync">
    There were issues causing app crashes during the preparation phase for syncing data to remote peers.

    With these improvements, the likelihood of encountering errors during syncing has been significantly reduced.
  </Accordion>

  <Accordion title="Added: Variant of `fetch_attachment()` to `Store`">
    These new variants take an attachment token dictionary representation as given by the value of `QueryResultItem`.
  </Accordion>

  <Accordion title="Added: Method `new_attachment()` on `Store`">
    As a replacement for the corresponding and now deprecated method on `Collection`.
  </Accordion>

  <Accordion title="Added: Method `fetch_attachment()` on `Store`">
    As a replacement for the corresponding and now deprecated methods on `Collection`.
  </Accordion>

  <Accordion title="Added: `get_id()`, `get_len()`, and `get_metadata()`">
    To `AttachmentToken`.
  </Accordion>

  <Accordion title="Deprecated: Method `new_attachment()` of `Collection`">
    Replaced by the newly introduced equivalent method on `Store`.
  </Accordion>

  <Accordion title="Deprecated: Method `fetch_attachment()` of `Collection`">
    Use the newly introduced equivalent method on `Store` instead.
  </Accordion>

  <Accordion title="Changed: the default bind IP address of TCP and HTTP">
    Transports to be IPv6 "any" ([::]) rather than IPv4 (0.0.0.0).
  </Accordion>

